generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Symbol {
  symbol     String       @id
  name       String?
  sector     String?
  prices     DailyPrice[]
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
}

model DailyPrice {
  id      Int      @id @default(autoincrement())
  symbol  String
  date    DateTime
  close   Float
  open    Float?
  high    Float?
  low     Float?
  volume  Float?
  value   Float?

  symbolRef Symbol @relation(fields: [symbol], references: [symbol], onDelete: Cascade)

  @@unique([symbol, date])
  @@index([symbol, date])
}
